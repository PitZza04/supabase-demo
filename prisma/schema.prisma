generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model address {
  id               String         @id @db.Uuid
  created_at       DateTime?      @default(now()) @db.Timestamptz(6)
  street_address_1 String
  street_address_2 String
  region_id        String         @db.Uuid
  province_id      String?        @db.Uuid
  city_id          String?        @db.Uuid
  brgy_id          String?        @db.Uuid
  barangay         barangay?      @relation(fields: [brgy_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  city             city?          @relation(fields: [city_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  province         province?      @relation(fields: [province_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  region           region         @relation(fields: [region_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_profile     user_profile[]
}

model barangay {
  id         String    @id @db.Uuid
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  city_id    String?   @db.Uuid
  address    address[]
  city       city?     @relation(fields: [city_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model brand {
  id         BigInt    @id @default(autoincrement())
  name       String
  img_url    String?
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @db.Timestamptz(6)
  model      model[]
  vehicle    vehicle[]
}

model city {
  id          String     @id @db.Uuid
  created_at  DateTime?  @default(now()) @db.Timestamptz(6)
  city_name   String
  province_id String     @db.Uuid
  address     address[]
  barangay    barangay[]
  province    province   @relation(fields: [province_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model driver_license {
  id              String         @id(map: "driver_license_id_pkey") @db.Uuid
  created_at      DateTime?      @default(now()) @db.Timestamptz(6)
  license_no      String
  date_expiration DateTime?      @db.Date
  driver_img_url  String?
  user_profile    user_profile[]
}

model model {
  id         BigInt    @id @default(autoincrement())
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @db.Timestamptz(6)
  name       String
  img_url    String?
  brand_id   BigInt
  brand      brand     @relation(fields: [brand_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  vehicle    vehicle[]
}

model product {
  id                   String            @id @db.Uuid
  created_at           DateTime?         @default(now()) @db.Timestamptz(6)
  product_name         String
  price                Decimal?          @db.Decimal
  product_metadata     Json?
  shop_id              String            @db.Uuid
  published            Boolean
  services_category_id String            @db.Uuid
  services_type_id     String            @db.Uuid
  services_category    services_category @relation(fields: [services_category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  services_type        services_type     @relation(fields: [services_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model province {
  id            String    @id @db.Uuid
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  province_name String?
  region_id     String?   @db.Uuid
  address       address[]
  city          city[]
  region        region?   @relation(fields: [region_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model region {
  id          String     @id @unique @db.Uuid
  created_at  DateTime?  @default(now()) @db.Timestamptz(6)
  region_name String
  address     address[]
  province    province[]
}

model services_category {
  id               String        @id @db.Uuid
  created_at       DateTime?     @default(now()) @db.Timestamptz(6)
  services_type_id String        @db.Uuid
  category_name    String
  product          product[]
  services_type    services_type @relation(fields: [services_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model services_type {
  id                String              @id @db.Uuid
  created_at        DateTime?           @default(now()) @db.Timestamptz(6)
  type_name         String
  product           product[]
  services_category services_category[]
}

model user_profile {
  id                String         @id(map: "profiles_pkey") @db.Uuid
  created_at        DateTime?      @default(now()) @db.Timestamptz(6)
  metadata          Json           @default("{\"birth\": \"\", \"fname\": \"\", \"lname\": \"\", \"mname\": \"\", \"gender\": \"\"}")
  avatar_url        String
  address_id        String         @db.Uuid
  driver_license_id String         @db.Uuid
  gender            gender?
  address           address        @relation(fields: [address_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  driver_license    driver_license @relation(fields: [driver_license_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  vehicle           vehicle[]
}

model vehicle {
  id           BigInt       @id @default(autoincrement())
  created_at   DateTime?    @default(now()) @db.Timestamptz(6)
  plate_no     String?
  engine_no    String?
  fuel_type    String
  chassis_no   String?
  user_id      String       @db.Uuid
  brand_id     BigInt
  model_id     BigInt
  brand        brand        @relation(fields: [brand_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  model        model        @relation(fields: [model_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_profile user_profile @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

enum gender {
  Male
  Female
}

enum status {
  active
  inactive
  deleted
}
